<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Local Shop</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="home.css"/>
</head>
<body>
  <!-- Header -->
  <header class="top-header">
    <div class="header-left">
      <i class="fa-solid fa-phone header-icon" id="phoneIcon"></i>
      <i class="fa-solid fa-heart header-icon" id="wishlistIcon"><span class="notification-badge">2</span></i>
     <span class="notification-badge">2</span></i>
      <div class="notification-container">
        <i class="fa-solid fa-bell header-icon" id="notificationIcon"><span class="notification-badge">3</span></i>
        <!-- Notification Panel -->
        <div class="notification-panel" id="notificationPanel">
          <div class="notification-header">
            <h3><i class="fa-solid fa-bell"></i> Notifications</h3>
            <span class="mark-all-read" id="markAllRead">Mark all as read</span>
          </div>
          <ul class="notification-list">
            <li class="notification-item unread">
              <div class="notification-icon">
                <i class="fa-solid fa-tag"></i>
              </div>
              <div class="notification-content">
                <div class="notification-title">
                  <span class="notification-dot"></span>New Sale! 30% off on all summer collection
                </div>
                <div class="notification-time">2 hours ago</div>
              </div>
            </li>
            <li class="notification-item unread">
              <div class="notification-icon">
                <i class="fa-solid fa-box"></i>
              </div>
              <div class="notification-content">
                <div class="notification-title">
                  <span class="notification-dot"></span>Your order #12345 has been shipped
                </div>
                <div class="notification-time">1 day ago</div>
              </div>
            </li>
            <li class="notification-item unread">
              <div class="notification-icon">
                <i class="fa-solid fa-heart"></i>
              </div>
              <div class="notification-content">
                <div class="notification-title">
                  <span class="notification-dot"></span>A product in your wishlist is now on sale
                </div>
                <div class="notification-time">3 days ago</div>
              </div>
            </li>
            <li class="notification-item">
              <div class="notification-icon">
                <i class="fa-solid fa-star"></i>
              </div>
              <div class="notification-content">
                <div class="notification-title">Thank you for your review!</div>
                <div class="notification-time">1 week ago</div>
              </div>
            </li>
          </ul>
          <div class="notification-footer">
            <a href="#">View all notifications</a>
          </div>
        </div>
      </div>
    </div>
    </div>
    <script>
    document.getElementById("notificationPanelToggle").addEventListener("click", function () {
        const panel = document.getElementById("notificationPanel");
        panel.style.display = panel.style.display === "block" ? "none" : "block";
        if (panel.style.display === "block") {
            loadNotifications();
        }
    });
/////
    function loadNotifications() {
        fetch("fetch_notifications.php?user_id=123") // استبدل 123 بـ user id الفعلي من الجلسة
            .then(response => response.json())
            .then(data => {
                const list = document.querySelector(".notification-list");
                list.innerHTML = "";

                if (data.length === 0) {
                    list.innerHTML = "<li class='notification-item'>لا توجد تنبيهات حالياً.</li>";
                } else {
                    data.forEach(notification => {
                        const li = document.createElement("li");
                        li.className = "notification-item unread";
                        li.innerHTML = `
                            <div class="notification-icon">
                                <i class="fa-solid fa-bell"></i>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">
                                    <span class="notification-dot"></span>${notification.message}
                                </div>
                                <div class="notification-time">${notification.created_at}</div>
                            </div>
                        `;
                        list.appendChild(li);
                    });
                }
            });
    }
</script>
///
    
    <h1 class="site-title" id="homeLink">LOCAL SHOP</h1>
    
    <div class="header-right">
      <i class="fa-solid fa-magnifying-glass header-icon" id="searchIcon"></i>
     <i class="fa-solid fa-cart-shopping header-icon" id="cartIcon"></i>
  <div class="dropdown-panel cart-panel" id="cartPanel">
    <div class="dropdown-container">
          </div>
          <ul class="cart-items">
            <li class="cart-item">
              <img src="/api/placeholder/60/60" alt="Product" class="cart-item-image">
              <div class="cart-item-details">
                <div class="cart-item-title">Striped T-Shirt</div>
                <div class="cart-item-price">EGP 249.99</div>
              </div>
              <div class="cart-item-actions">
                <button class="cart-btn">-</button>
                <input type="text" value="1" class="cart-quantity">
                <button class="cart-btn">+</button>
                <i class="fa-solid fa-trash remove-cart"></i>
              </div>
            </li>
            
           
          </ul>
          <div class="dropdown-footer">
            <div class="cart-total">
              <span>Total:</span>
              <span>EGP 249.99</span>
            </div>
            <button class="checkout-btn">Checkout</button>
          </div>
        </div>
      </div>
      <i class="fa-solid fa-circle-user header-icon" id="userIcon"></i>
    </div>
  </header>

  <!-- Navbar -->
  <div class="navbar">
    <a href="#" id="homeNav">HOME</a>
    <a href="#" id="brandsNav">BRANDS</a>
    <a href="#" id="categoriesNav">CATEGORIES</a>
    <a href="#" id="contactNav">CONTACT US</a>
  </div>

  <!-- Categories Section -->
  <div class="category-container">
    <div class="category-card" id="clothesCategory">
      <img src="C:\wamp64\www\local-shop11\Views\WhatsApp Image 2025-05-19 at 12.33.20 PM.jpeg" alt="Clothes">
      <p>Clothes</p>
    </div>
    <div class="category-card" id="bagsCategory">
      <img src="C:\wamp64\www\(Local-shop)\Views\WhatsApp Image 2025-05-19 at 12.32.02 PM (2).jpeg" alt="Bags">
      <p>Bags</p>
    </div>
    <div class="category-card" id="shoesCategory">
      <img src="C:\wamp64\www\(Local-shop)\Views\WhatsApp Image 2025-05-19 at 12.32.02 PM.jpeg" alt="Shoes">
      <p>Shoes</p>
    </div>
    <div class="category-card" id="glassesCategory">
      <img src="C:\wamp64\www\(Local-shop)\Views\WhatsApp Image 2025-05-19 at 12.32.01 PM.jpeg" alt="Glasses">
      <p>Glasses</p>
    </div>
    <div class="category-card" id="accessoriesCategory">
      <img src="C:\wamp64\www\(Local-shop)\Views\WhatsApp Image 2025-05-19 at 12.32.02 PM (1).jpeg" alt="Accessories">
      <p>Accessories</p>
    </div>
  </div>

  <!-- What's New Section -->
  <div class="whats-new-container">
    <h2 class="whats-new-title">What's New</h2>
    <div class="whats-new-banner">
      <img id="whatsNewImage" src="C:\wamp64\www\(Local-shop)\Views\@시즌오프.jpeg" alt="What's New">
    </div>
  </div>

  <!-- Brands Section -->
  <h2 class="brand-section-title">Featured Brands</h2>
  <div class="brand-container">
    <div class="brand-border" id="brand1">
      <img src="/api/placeholder/300/200" alt="Brand 1">
    </div>
    <div class="brand-border" id="brand2">
      <img src="/api/placeholder/300/200" alt="Brand 2">
    </div>
    <div class="brand-border" id="brand3">
      <img src="/api/placeholder/300/200" alt="Brand 3">
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>About Us</h3>
        <p>Local Shop is an online platform that showcases various local brands across Egypt in one place, supporting small businesses and making it easier for customers to discover unique products.</p>
      </div>
      <div class="footer-section">
        <h3>Quick Links</h3>
        <a href="#">Home</a>
        <a href="#">Brands</a>
        <a href="#">Categories</a>
        <a href="#">Contact Us</a>
      </div>
      <div class="footer-section">
        <h3>Contact Info</h3>
        <p><i class="fa-solid fa-location-dot"></i> Cairo, Egypt</p>
        <p><i class="fa-solid fa-phone"></i> +20 123 456 7890</p>
        <p><i class="fa-solid fa-envelope"></i> info@localshop.com</p>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 Local Shop. All rights reserved.</p>
    </div>
  </footer>

  <!-- Notification Modal -->
  <div id="notificationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" id="closeNotification">&times;</span>
        <h2 class="modal-title"><i class="fa-solid fa-bell"></i> Notifications</h2>
      </div>
      <div id="notificationContent">
        <div class="notification-item">
          <div class="notification-icon">
            <i class="fa-solid fa-tag"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">New Sale! 30% off on all summer collection</div>
            <div class="notification-time">2 hours ago</div>
          </div>
        </div>
        <div class="notification-item">
          <div class="notification-icon">
            <i class="fa-solid fa-box"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">Your order #12345 has been shipped</div>
            <div class="notification-time">1 day ago</div>
          </div>
        </div>
        <div class="notification-item">
          <div class="notification-icon">
            <i class="fa-solid fa-heart"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">A product in your wishlist is now on sale</div>
            <div class="notification-time">3 days ago</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Wishlist Modal -->
  <div id="wishlistModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" id="closeWishlist">&times;</span>
        <h2 class="modal-title"><i class="fa-solid fa-heart"></i> My Wishlist</h2>
      </div>
      <div id="wishlistContent">
        <div class="wishlist-item">
          <img src="/api/placeholder/60/60" alt="Product" class="wishlist-item-image">
          <div class="wishlist-item-details">
            <div class="wishlist-item-title">Casual Summer Dress</div>
            <div class="wishlist-item-price">EGP 349.99</div>
          </div>
          <div class="wishlist-item-actions">
            <button class="add-to-cart-btn">Add to Cart</button>
            <i class="fa-solid fa-trash remove-wishlist"></i>
          </div>
        </div>
        <div class="wishlist-item">
          <img src="/api/placeholder/60/60" alt="Product" class="wishlist-item-image">
          <div class="wishlist-item-details">
            <div class="wishlist-item-title">Leather Handbag</div>
            <div class="wishlist-item-price">EGP 599.99</div>
          </div>
          <div class="wishlist-item-actions">
            <button class="add-to-cart-btn">Add to Cart</button>
            <i class="fa-solid fa-trash remove-wishlist"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" id="closeCart">&times;</span>
        <h2 class="modal-title"><i class="fa-solid fa-cart-shopping"></i> Shopping Cart</h2>
      </div>
      <div id="cartContent">
        <div class="cart-item">
          <img src="/api/placeholder/60/60" alt="Product" class="cart-item-image">
            <div class="cart-item-details">
              <div class="cart-item-title">Striped T-Shirt</div>
              <div class="cart-item-price">EGP 249.99</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
       <script>
document.addEventListener('DOMContentLoaded', function() {
  // Notification panel functionality
  const notificationIcon = document.getElementById('notificationIcon');
  const notificationPanel = document.getElementById('notificationPanel');
  const markAllRead = document.getElementById('markAllRead');
  const notificationItems = document.querySelectorAll('.notification-item.unread');
  const notificationBadge = notificationIcon.querySelector('.notification-badge');

  // Cart panel functionality
  const cartIcon = document.getElementById('cartIcon');
  const cartPanel = document.getElementById('cartPanel');
  const cartBadge = cartIcon.querySelector('.notification-badge');
  const cartQuantityInputs = document.querySelectorAll('.cart-quantity');
  const decrementBtns = document.querySelectorAll('.cart-btn:nth-child(1)');
  const incrementBtns = document.querySelectorAll('.cart-btn:nth-child(3)');
  const removeCartBtns = document.querySelectorAll('.remove-cart');

  // Toggle notification panel
  notificationIcon.addEventListener('click', function(e) {
    e.stopPropagation();
    notificationPanel.classList.toggle('show');
    cartPanel.classList.remove('show'); // Close cart if open
  });

  // Toggle cart panel
  cartIcon.addEventListener('click', function(e) {
    e.stopPropagation();
    cartPanel.classList.toggle('show');
    notificationPanel.classList.remove('show'); // Close notifications if open
  });

  // Close panels when clicking outside
  document.addEventListener('click', function(e) {
    if (!notificationPanel.contains(e.target) && e.target !== notificationIcon) {
      notificationPanel.classList.remove('show');
    }
    if (!cartPanel.contains(e.target) && e.target !== cartIcon) {
      cartPanel.classList.remove('show');
    }
  });

  // Mark all notifications as read
  markAllRead.addEventListener('click', function(e) {
    e.stopPropagation();
    notificationItems.forEach(item => {
      item.classList.remove('unread');
      const dot = item.querySelector('.notification-dot');
      if (dot) dot.remove();
    });
    notificationBadge.style.display = 'none';
  });

  // Individual notification click
  notificationItems.forEach(item => {
    item.addEventListener('click', function() {
      this.classList.remove('unread');
      const dot = this.querySelector('.notification-dot');
      if (dot) dot.remove();
      
      const remainingUnread = document.querySelectorAll('.notification-item.unread').length;
      if (remainingUnread > 0) {
        notificationBadge.textContent = remainingUnread;
      } else {
        notificationBadge.style.display = 'none';
      }
    });
  });

  // Cart quantity buttons
  decrementBtns.forEach((btn, index) => {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      let quantity = parseInt(cartQuantityInputs[index].value);
      if (quantity > 1) {
        cartQuantityInputs[index].value = quantity - 1;
        updateCartTotal();
      }
    });
  });

  incrementBtns.forEach((btn, index) => {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      let quantity = parseInt(cartQuantityInputs[index].value);
      cartQuantityInputs[index].value = quantity + 1;
      updateCartTotal();
    });
  });

  // Remove item from cart
  removeCartBtns.forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      const cartItem = this.closest('.cart-item');
      cartItem.remove();

      const remainingItems = document.querySelectorAll('.cart-item').length;
      if (remainingItems > 0) {
        cartBadge.textContent = remainingItems;
      } else {
        cartBadge.style.display = 'none';

        const cartItems = document.querySelector('.cart-items');
        const emptyCart = document.createElement('li');
        emptyCart.className = 'empty-cart';
        emptyCart.innerHTML = `
          <i class="fa-solid fa-cart-shopping" style="font-size: 30px; margin-bottom: 10px; color: #ccc;"></i>
          <p>Your cart is empty</p>
          <a href="#" style="color: #007bff; text-decoration: none; display: block; margin-top: 10px;">
            Browse products
          </a>
        `;
        cartItems.appendChild(emptyCart);
      }

      updateCartTotal();
    });
  });

  function updateCartTotal() {
    const items = document.querySelectorAll('.cart-item');
    let total = 0;

    items.forEach(item => {
      const priceText = item.querySelector('.cart-item-price').textContent;
      const price = parseFloat(priceText.replace('EGP ', ''));
      const quantity = parseInt(item.querySelector('.cart-quantity').value);
      total += price * quantity;
    });

    document.querySelector('.cart-total span:last-child').textContent = `EGP ${total.toFixed(2)}`;
  }
});
</script>





</body>
</html>